<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Word Game</title>

    <!-- Add Google Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto&display=swap"
      rel="stylesheet"
    />
    <!-- For normal font -->

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #f0f8ff;
        font-family: "Luckiest Guy", cursive; /* Cartoonish font */
        font-size: 18px; /* Increase the base font size for readability */
      }
      .sidebar {
        background-color: #ffcccb; /* Light coral */
        height: 100vh;
        position: fixed;
        width: 20%;
        font-size: 20px; /* Increase the font size for the sidebar */
      }
      .sidebar .user-icon {
        font-size: 80px;
        color: #ff7f50; /* Coral */
      }

      .sidebar .footer {
        position: absolute;
        bottom: 0;
        width: 100%;
        text-align: center;
        padding: 10px;
        background-color: #ffcccb;
        font-size: 16px; /* Slightly smaller for the footer */
      }
      .content {
        margin-left: 20%;
        padding: 20px;
      }
      .table-word {
        background-color: #fffacd; /* Lemon Chiffon */
        border-radius: 8px;
        padding: 15px;
        font-size: 20px; /* Larger font size for the word table */
      }
      table th,
      table td {
        font-size: 22px; /* Larger font for table content */
      }
      .transcription {
        font-family: "Roboto", sans-serif; /* Normal text font for transcription */
      }
      body,
      .sidebar,
      .user-info,
      .content,
      table th,
      table td {
        color: #00008b !important; /* Dark Blue */
      }
      .translation-option {
        cursor: pointer;
        color: blue;
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <div class="sidebar d-flex flex-column align-items-center">
      <div class="mt-4">
        <i class="bi bi-person-circle user-icon"></i>
      </div>
      <div class="mt-4 user-info text-center">
        <% if (locals.user) { %>
        <img
          src="<%= user.ava %>"
          alt="User Avatar"
          class="img-fluid rounded-circle mb-3"
          style="width: 80px; height: 80px"
        />
        <h4><%= user.user_name %></h4>
        <p><%= user.email %></p>

        <!-- Display Current Level -->
        <p>Level: <%= user_info.level %></p>

        <!-- Display XP Progress -->
        <div class="xp-info mt-2">
          <p>XP: <%= user_info.current_xp %> / <%= total_exp %></p>
        
          <!-- XP Progress Bar -->
          <div class="progress" style="height: 20px">
            <div
              class="progress-bar"
              role="progressbar"
              style="width: <% 
                if (total_exp > 0) { 
                  %><%= (user_info.current_xp / total_exp) * 100 %><% 
                } else { 
                  %>0<% 
                } 
              %>%"
              aria-valuenow="<%= user_info.current_xp %>"
              aria-valuemin="0"
              aria-valuemax="<%= total_exp %>"
            >
              <% if (total_exp > 0) { %>
                <%= Math.round((user_info.current_xp / total_exp) * 100) %>%
              <% } else { %>
                0%
              <% } %>
            </div>
          </div>
        </div>
        

        <a href="/auth/logout" class="btn btn-danger mt-3">Logout</a>
        <% } else { %>
        <i class="bi bi-person-circle user-icon"></i>
        <h4>John Doe</h4>
        <p>Level: 1</p>
        <% } %>
      </div>

      <div class="footer">
        <p>Â© 2024 Word Game</p>
      </div>
    </div>

    <div class="content">
      <div class="table-word p-3">
        <h2 class="text-center mb-4">Word List</h2>

        <table class="table table-striped">
          <thead class="table-primary">
            <tr>
              <th>English Word</th>
              <th>Transcription</th>
              <th>Russian Translations</th>
            </tr>
          </thead>
          <tbody id="wordTable">
            <% if (selectedWord && additionalWords.length) { %>
            <tr>
              <td class="word-text"><%= selectedWord['English Word'] %></td>
              <td class="transcription"><%= selectedWord.Transcription %></td>
              <td>
                <ul>
                  <!-- Randomize the order of translations -->
                  <% 
                    const translations = [...additionalWords, selectedWord].sort(() => Math.random() - 0.5);
                    translations.forEach((word) => { 
                  %>
                  <li>
                    <form action="<%= word['Russian Translation'] === selectedWord['Russian Translation'] ? '/correct_answer' : '/wrong_answer' %>" method="post" style="display:inline;">
                      <input type="hidden" name="selectedWord" value='<%= JSON.stringify(selectedWord) %>' />
                      <button type="submit" class="translation-option">
                        <%= word['Russian Translation'] %>
                      </button>
                    </form>
                  </li>
                  <% }); %>
                </ul>
              </td>
            </tr>
            <% } %>
          </tbody>
        </table>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
